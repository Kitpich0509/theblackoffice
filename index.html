<!DOCTYPE html>
<html>
<head>
<title>Office Empire ‚Äì Dashboard</title>
<style> 
body{margin:0;background:#0b0e13;color:#e6f1ff;font-family:system-ui}
header{background:#121826;padding:15px;font-size:20px}
.dashboard{display:grid;grid-template-columns:1fr 2fr;gap:15px;padding:15px}
.panel{background:#121826;padding:15px;border-radius:8px}
button{background:#1f2937;color:#e6f1ff;border:1px solid #374151;padding:8px;margin:4px 0;width:100%}
.card{background:#0b1220;padding:10px;border-radius:6px;margin-bottom:8px}
table{width:100%;border-collapse:collapse;font-size:13px}
td,th{border:1px solid #374151;padding:6px;text-align:center}
#popup,#report{position:fixed;inset:0;background:rgba(0,0,0,.75);display:none;align-items:center;justify-content:center}
.modal{background:#121826;padding:20px;border-radius:8px;max-height:85vh;overflow:auto}
.fire{background:#7f1d1d;border-color:#991b1b}
</style>
</head>
<body>

<header>üè¢ Office Empire ‚Äì Realistic Dashboard</header>

<div class="dashboard">
<div class="panel">
<h3>Resources</h3>
<div id="stats"></div>
<button onclick="buyPhones()">Buy 100 Phones ($1)</button>
<button onclick="buyAccount('tg')">Buy Telegram ($5)</button>
<button onclick="buyAccount('ws')">Buy WhatsApp ($7)</button>
<button onclick="buyGV()">Buy Google Voice ($7)</button>

<h3>Hire</h3>
<button onclick="hireEmployee('Contact')">Hire Contact</button>
<button onclick="hireEmployee('Sales')">Hire Sales</button>
<button onclick="hireEmployee('Team Leader')">Hire Team Leader</button>
<button onclick="hireEmployee('Manager')">Hire Manager</button>

<button onclick="showReport()">üìä Live Employee Report</button>
  <button onclick="showFinance()">üí∞ Finance Summary</button>

</div>

<div class="panel">
<h3>Employees</h3>
<div id="employees"></div>
</div>
</div>

<div class="panel">
<h3>Top-Up History</h3>
<div id="history"></div>
</div>

<div id="popup">
<div class="modal">
<div id="popupContent"></div>
<button onclick="closePopup()">Close</button>
</div>
</div>

<div id="report">
<div class="modal">
<h3>Employee Live Report</h3>
<div id="reportContent"></div>
<button onclick="closeReport()">Close</button>
</div>
</div>

<script>
const SAVE_KEY="office_empire_dashboard_v2";
let game={
cash:1000,phones:500,tg:2,ws:2,gv:0,
customers:[],history:[],
offices:[{employees:[]}],
lastTick:Date.now(),weekMinutes:0,

totalIncome:0,
expense:{
  phones:0,
  gv:0,
  tg:0,
  ws:0,
  salary:0
}
};

const salary={Contact:700,Sales:900,"Team Leader":1300,Manager:2000};

function rand(a,b){return Math.floor(Math.random()*(b-a+1))+a;}
  function chance(p){
  return Math.random() < p;
}

function banAccount(type){
  if(game[type] > 0){
    game[type]--;
    game.history.unshift(`üö´ ${type.toUpperCase()} account banned`);
  }
}

function isWork(ts){
  let h=new Date(ts).getHours();
  return h>=4 && h<16;
}

function buyPhones(){
  if(game.cash>=1){
    game.cash--;
    game.phones+=100;
    game.expense.phones += 1; // ‚úÖ ADD
    save();update();
  }
}

function buyAccount(t){
  let c=t==="tg"?5:7;
  if(game.cash>=c){
    game.cash-=c;
    game[t]++;
    game.expense[t] += c; // ‚úÖ ADD
    save();update();
  }
}

function buyGV(){
  if(game.cash>=7){
    game.cash-=7;
    game.gv++;
    game.expense.gv += 7; // ‚úÖ ADD
    save();update();
  }
}


function hireEmployee(role){
game.offices[0].employees.push({
role,
phonesUsed:0,phoneBuffer:0,
newCustomers:0,customersUsed:0,
topup:0,tgUsed:0,wsUsed:0,gvUsed:0,
workedMinutes:0
});
save();update();
}

function fireEmployee(index){
let e=game.offices[0].employees[index];
let hours=Math.floor(e.workedMinutes/60);
if(hours>=1){
let hourly=salary[e.role]/12;
let cost=hours*hourly;
game.cash-=cost;
game.history.unshift(`üî• Fired ${e.role} ‚Üí Paid $${cost.toFixed(2)}`);
}
game.offices[0].employees.splice(index,1);
save();update();
}

function tick(ts){
  if(!isWork(ts)) return;

  game.offices[0].employees.forEach(e=>{
    e.workedMinutes += 10;

    // ===== CONTACT ROLE =====
    if(e.role==="Contact"){
      let used = rand(5,15);
      if(game.phones >= used){
        game.phones -= used;
        e.phonesUsed += used;
        e.phoneBuffer += used;
        e.gvUsed++;

        if(chance(0.004)) banAccount("gv");

        if(e.phoneBuffer >= rand(100,200)){
          e.phoneBuffer = 0;
          game.customers.push({});
          e.newCustomers++;
        }
      }
    }

    // ===== SALES ROLE =====
    if(e.role === "Sales" && game.customers.length > 0){

      if(game.tg + game.ws <= 0) return;

      if(!e.salesTimer) e.salesTimer = 0;
      e.salesTimer += 10;

      if(e.salesTimer >= 15){
        e.salesTimer = 0;

        game.customers.splice(0,1);
        e.customersUsed++;

        if(chance(0.006)) banAccount("tg");
        if(chance(0.008)) banAccount("ws");

        if(Math.random() < 0.12){
          e.successCount = (e.successCount || 0) + 1;
        }

        if(e.customersUsed % 25 === 0){
          let sales = rand(1,2);
          for(let i=0;i<sales;i++){
            let amount = rand(100,2000);
            let cust = "Customer" + rand(1000,9999);
            game.cash += amount;
            game.totalIncome += amount;
            e.topup += amount;
            game.history.unshift(`${cust} ‚Üí $${amount}`);
            showPopup(cust, amount);
          }
        }
      }
    }

  }); // ‚úÖ THIS WAS MISSING

  // ===== WEEKLY SALARY =====
  game.weekMinutes += 10;
  if(game.weekMinutes >= 10080){
    game.weekMinutes = 0;
    game.offices[0].employees.forEach(e=>{
      game.cash -= salary[e.role] || 0;
      game.expense.salary += salary[e.role] || 0;
    });
  }

  save();
  update();
}


function showPopup(c,a){
document.getElementById("popupContent").innerHTML=
`üéâ CONGRATULATIONS<br><br>Customer: ${c}<br>Top-Up: $${a}`;
document.getElementById("popup").style.display="flex";
}
function closePopup(){document.getElementById("popup").style.display="none";}

function showReport(){
let t="<table><tr><th>Role</th><th>Phones</th><th>New</th><th>Used</th><th>Top-Up</th><th>Hours</th></tr>";
game.offices[0].employees.forEach(e=>{
t+=`<tr>
<td>${e.role}</td>
<td>${e.phonesUsed}</td>
<td>${e.newCustomers}</td>
<td>${e.customersUsed}</td>
<td>$${e.topup}</td>
<td>${Math.floor(e.workedMinutes/60)}</td>
</tr>`;
});
t+="</table>";
document.getElementById("reportContent").innerHTML=t;
document.getElementById("report").style.display="flex";
}
function closeReport(){document.getElementById("report").style.display="none";}
  function showFinance(){
  let spent =
    game.expense.phones +
    game.expense.gv +
    game.expense.tg +
    game.expense.ws +
    game.expense.salary;

  let html = `
  <table>
    <tr><th colspan="2">üìä Financial Summary</th></tr>
    <tr><td>Total Income</td><td>$${game.totalIncome.toFixed(2)}</td></tr>
    <tr><td>Total Expense</td><td>$${spent.toFixed(2)}</td></tr>
    <tr><th colspan="2">Expense Breakdown</th></tr>
    <tr><td>Phones</td><td>$${game.expense.phones}</td></tr>
    <tr><td>Google Voice</td><td>$${game.expense.gv}</td></tr>
    <tr><td>Telegram</td><td>$${game.expense.tg}</td></tr>
    <tr><td>WhatsApp</td><td>$${game.expense.ws}</td></tr>
    <tr><td>Salary</td><td>$${game.expense.salary}</td></tr>
  </table>
  `;

  document.getElementById("reportContent").innerHTML = html;
  document.getElementById("report").style.display = "flex";
}


function update(){
document.getElementById("stats").innerHTML=
`üíµ Cash: $${game.cash.toFixed(2)}<br>
üìû Phones: ${game.phones}<br>
üü¢ Telegram: ${game.tg}<br>
üîµ WhatsApp: ${game.ws}<br>
üì± Google Voice: ${game.gv}<br>
üë• Customers: ${game.customers.length}`;

document.getElementById("employees").innerHTML=
game.offices[0].employees.map((e,i)=>`
<div class="card">
${e.role}<br>
‚è± ${Math.floor(e.workedMinutes/60)}h
<button class="fire" onclick="fireEmployee(${i})">üî• Fire</button>
</div>`).join("");

document.getElementById("history").innerHTML=game.history.slice(0,10).join("<br>");
}

function save(){localStorage.setItem(SAVE_KEY,JSON.stringify(game));}
function load(){let s=localStorage.getItem(SAVE_KEY);if(s)game=JSON.parse(s);}

load();update();
setInterval(()=>tick(Date.now()),600000);
</script>
</body>
</html>
